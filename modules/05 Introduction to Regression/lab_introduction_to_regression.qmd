---
title: "Lab: Introduction to Regression"
format:
  html:
    embed-resources: true
---

# ðŸ›‘ Formatting (delete this section before posting to Canvas) ðŸ›‘

* Please name this file `lab_module_name.qmd`.
* The Overview section, each task number, and each question number should be written as a level-one headers (e.g., `# Task 1`).
* All R code being run, should be put into R code chunks.
* All R code being discussed in the text should be placed inside backticks (e.g., `install.packages("dplyr")`).
* R package names being discussed in the text should be formatted as code (e.g., "...the `dplyr` package...). 
* When functions are discussed in the text, they should be formatted as code and empty parentheses added to the end of the function name (e.g., "The `tibble()` function can be used to create data framesâ€¦").
* Data set/frame names, variable names, and other key words should be written with **bold** text (e.g., "Please download **chocolate study 1.xls**".
* There should be 2 line breaks (returns) immediately above level-one headers. There should be 1 line break (return) immediately above all other headers.
* There should be one line break (return) immediately above each code chunk. There should be at least 1 line break immediately below each code chunk. If the the code chunk is immediately followed by a level-one header, then there will be two line breaks.


# Load packages

Remember, it's considered a best practice to load all the packages that your file will use up at the top of the file. If you have not yet installed a package, you will need to do so by running `install.packages("package name")` in the R console. For example, to install the `dplyr` package, you would run `install.packages("dplyr")`. However, you typically **do not** want to type the code to install the package here in your Quarto file because you only need to install the package once on a given computer. Not every time you run your R code.

```{r}
#| label: load-packages
library(dplyr, warn.conflicts = FALSE) # The "warn.conflicts" part is optional
library(readr)
library(broom)
library(ggplot2)
library(meantables)
library(freqtables)
```


# Overview

In this lab, we will practice fitting and interpreting regression models. The data we will use was collected from mothers and babies for the purpose of investigating the occurrence of low birth weight. 

# Task 1

Please use the following links to download the low birth weight data to your computer and view the codebook:
 * [Click here to view/download the codebook](https://www.dropbox.com/s/n6za9yhtw44bh7f/Codebook lowbwt.pdf?dl=0). Look over the codebook to learn a little bit about the data you will be working with.
 * [Click here to view/download the data](https://www.dropbox.com/s/whel3kfsjswu2yy/lowbwt.rds?dl=0).
 
# Task 2

Import `lowbwt.rds` into your R global environment as `lowbwt`.

```{r}
lowbwt <- read_rds("/Users/bradcannell/Dropbox/Datasets/Low Birth Weight/lowbwt.rds")
```

# Task 3

Please view the structure of `lowbwt` using the `str()` function or the `glimpse()` function.

```{r}
glimpse(lowbwt)
```

# Question 1

* The `lowbwt` data frame contains ____ rows and ____ columns.

* The `lowbwt` data frame contains 189 rows and 15 columns.

# Task 4

Please fit a linear regression model to the `lowbwt` data frame using `weight of mother at last menstrual period in pounds` as the regressand and the `age of the mother in years` as the regressor.

```{r}
glm(
  lwt ~ age,
  family = gaussian(link = "identity"),
  data   = lowbwt
)
```

# Question 2

What is the mean value of the `weight of mother at last menstrual period in pounds` when the `motherâ€™s age` is 0? (round to the nearest integer â€“ no decimal places)

The mean value of the weight of mother at last menstrual period in pounds when the motherâ€™s age is 0 is 106.

# Task 5

Please fit a linear regression model to the `lowbwt` data frame using `weight of mother at last menstrual period in pound`s as the regressand and `motherâ€™s smoking status` during pregnancy as the regressor.

```{r}
glm(
  lwt ~ smoke_f,
  family = gaussian(link = "identity"),
  data   = lowbwt
)
```

# Question 3

* What is the mean value of the `weight of mother at last menstrual period in pounds` when the `mother smoked during pregnancy`? (round to the nearest integer â€“ no decimal places)

```{r}
130.896 - 2.761
```

* The mean value of the `weight of mother at last menstrual period in pounds` when the `mother smoked during pregnancy` was 128. (rounded to the nearest integer â€“ no decimal places)

# Task 6

Please fit a logistic regression model to the `lowbwt` data frame using `low birth weight` as the regressand and `age of mother in years` as the regressor.

```{r}
glm(
  low  ~ age,
  family = binomial(link = "logit"),
  data   = lowbwt
) %>% 
  tidy(exp = TRUE)
```

# Question 4

* On average, babies had _____ times the odds of `low birth weight` for each one-year increase in mother's age.(round to the hundredths place â€“ two decimals)

* On average, babies had 0.95 times the odds of `low birth weight` for each one-year increase in mother's age.

# Task 7

Please fit a logistic regression model to the `lowbwt` data frame using `low birth weight` as the regressand and `motherâ€™s smoking status during pregnancy` as the regressor.

```{r}
glm(
  low  ~ smoke_f,
  family = binomial(link = "logit"),
  data   = lowbwt
) %>% 
  tidy(exp = TRUE)
```

# Question 5

* On average, `low birth weight` babies had _____ times the odds of having a `mother who smoked` compared to babies that were not born with a `low birth weight`. (round to the hundredths place â€“ two decimals)

* On average, `low birth weight` babies had 2.02 times the odds of having a `mother who smoked` compared to babies that were not born with a `low birth weight`. (rounded to the hundredths place â€“ two decimals)

# Task 8

Please fit a Poisson regression model to the `lowbwt` data frame using `history of premature labor` as the regressand and `age of mother in years` as the regressor.

```{r}
glm(
  ptl  ~ age,
  family = poisson(link = "log"),
  data   = lowbwt
) %>% 
  tidy(exp = TRUE)
```

# Question 6

* Mother's reported _____ times the number of `premature deliveries`, on average, for each one-year increase in `age`. (rounded to the hundredths place â€“ two decimals)

* Mother's reported 1.03 times the number of `premature deliveries` for each one-year increase in `age`. (rounded to the hundredths place â€“ two decimals)

# Task 9

Please fit a Poisson regression model to the `lowbwt` data frame using `history of premature labor` as the regressand and `motherâ€™s smoking status during pregnancy` as the regressor.

```{r}
glm(
  ptl  ~ smoke_f,
  family = poisson(link = "log"),
  data   = lowbwt
) %>% 
  tidy(exp = TRUE)
```

# Question 7

* Mother's who `smoked during pregnancy` reported an average of _____ times the number of `premature deliveries` compared to mothers who did not smoke during pregnancy. (round to the hundredths place â€“ two decimals)

* Mother's who `smoked during pregnancy` reported an average of 2.55 times the number of `premature deliveries` compared to mothers who did not smoke during pregnancy. (rounded to the hundredths place â€“ two decimals)
